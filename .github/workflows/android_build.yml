# Nama workflow yang muncul di GitHub Actions
name: Android CI (Final Build Fix)

on:
  push:
    branches: [ "main", "master" ]
  pull_request:
    branches: [ "main", "master" ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    # 1. Checkout Code
    - uses: actions/checkout@v3

    # 2. Setup Java
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: gradle

    # 3. FIX: Menambahkan Izin Eksekusi SECARA PAKSA (Mengatasi masalah Git)
    - name: Fix gradlew permissions
      run: chmod +x gradlew

    # 4. FIX: Perintah Clean dan Build Ulang (Mengatasi JAR hilang/korup)
    - name: Clean and Build Debug APK
      # 'clean' untuk membersihkan cache yang korup, 'assembleDebug' untuk build.
      # '--no-daemon' untuk menghindari masalah cache proses.
      run: ./gradlew clean assembleDebug --no-daemon
